网站名称：PDFShift

# 1. 前端交互与用户体验 (Frontend & UX)
## 1.1 首页 (Home)
- **布局结构**：采用三栏布局，中间为核心功能区，**左右两侧预留广告位**，用于接入广告联盟（如 Google AdSense）。
- **防机器人验证**：在上传或下载关键节点加入验证（如 Cloudflare Turnstile），防止接口滥用。
- **功能导航**：提供清晰的入口：PDF转Word、PDF转Excel、PDF转PPT、拆分、合并。
- **文件上传**：
  - 支持**拖拽上传**和点击选择。
  - 支持**批量上传**（主要用于合并功能）。
  - **预检查**：前端校验文件格式（.pdf）和大小。

## 1.2 状态反馈
- **进度展示**：实时显示上传进度条和转换处理状态（排队中 -> 转换中 -> 完成）。
- **结果页**：
  - 成功：显示文件名、大小、下载按钮。
  - 失败：显示具体原因（如“文件损坏”、“加密文件”）。

# 2. 核心业务逻辑 (Core Business Logic)
## 2.1 文件限制与付费策略
- **免费额度**：单文件 < 50MB。
- **超限处理**：当文件 >= 50MB 时，提供两种选择：
  1. **付费解锁**：支付成功后处理完整文档。
  2. **预览模式**：免费处理，但仅转换前 10 页，**并添加“PDFShift Preview”水印**。
  3. **硬性限制**：单文件大小不能超过 500MB。

## 2.2 转换功能
- **格式转换**：PDF 转 Word/Excel/PPT，重点保证排版还原度。
- **文档操作**：
  - **拆分**：支持自定义页码范围。
  - **合并**：支持调整文件顺序。

# 3. 后台与存储架构 (Backend & Storage)
## 3.1 存储服务
- **大文件存储**：负责接收上传和提供下载。
- **隐私策略（关键）**：设置生命周期规则，源文件和结果文件在 **2小时后自动物理删除**，并在前端声明此政策。

## 3.2 异步处理
- 采用异步任务队列处理转换请求，避免前端超时。

# 4. 数据库与数据记录 (Database)
- **用户标识**：生成唯一 `Client_ID`（基于浏览器指纹/Cookie），无需强制注册。
- **操作日志**：记录 `Client_ID`、操作类型、文件大小、处理结果（成功/失败原因）、时间戳。

# 5. 设计规格与性能指标 (Design Specs)
## 5.1 性能目标
- **访问量目标**：支持每月 1000 次访问请求。
- **平均负载**：按平均文件大小 50MB 计算存储与带宽需求。

## 5.2 存储清理策略 (Storage Lifecycle)
- **免费/未付费文件**：
  - 服务器保留时间：**1小时**。
  - 超过 1 小时后，文件自动物理删除，下载链接失效。
- **付费文件**：
  - 服务器保留时间：**24小时**。
  - 处理完成后，通过页面提示或邮件（如已提供）提醒用户及时下载。
  - 超过 24 小时后自动清理。

## 5.3 付费用户功能
- **历史查询**：支持付费客户端（通过 Client_ID 或账户）查询历史操作记录和下载链接（在有效期内）。

# 6. 后台管理系统 (Admin Dashboard)
## 6.1 系统参数配置
- **参数管理**：提供可视化界面设置系统运行参数，支持热更新（无需重启服务）。
  - **文件保留时间**：设置免费/付费文件的过期时间（默认 1h / 24h）。
  - **收费标准**：设置大文件解锁费用（如 50MB+ 收费 5元）。
  - **每日免费额度**：设置全站每日允许的免费转换总次数或总流量（如 每天限 100GB 免费流量），超过后强制转为付费或暂停服务。

## 6.2 监控与报表
- **日志查看**：查看系统操作日志，支持按 Client_ID、时间、状态筛选。
- **数据报表**：
  - **用户统计**：每日/月活跃用户数 (DAU/MAU)。
# 7. 安全与合规 (Security & Compliance)
## 7.1 安全机制
- **传输加密**：全站强制 HTTPS。
- **后台安全**：后台管理系统需通过账号密码+MFA（多因素认证）或 IP 白名单访问。
- **文件安全**：OSS 设置防盗链，下载链接需带签名且有时效性。

## 7.2 合规性
- **用户协议**：底部需展示《用户协议》和《隐私政策》链接。
- **免责声明**：明确声明不存储用户文件超过承诺时间，不负责文件内容审核。

# 8. 支付与结算 (Payment)
- **支付渠道**：接入主流支付网关（如支付宝、微信支付、Stripe）。
- **退款策略**：转换失败自动触发退款，或提供人工申诉入口。

# 9. 非功能性需求 (Non-functional Requirements)
- **兼容性**：支持 Chrome, Firefox, Safari, Edge 最新版本；移动端适配 H5 页面。
- **可用性**：系统可用性目标 99.9%。
- **异常处理**：
  - **加密文件**：检测到密码保护的 PDF，提示用户输入密码或无法处理。
  - **扫描件**：对于纯图片扫描的 PDF，提示用户转换结果可能为图片而非可编辑文本（除非集成 OCR，当前版本暂不涉及）。
